---
title: "Gold Price Forecasting"
author: "Emre Usenmez - github.com/emre-us"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 1. Introduction

This report discusses the various attempts at tackling a challenge of forecasting gold prices relatively accurately. The gold prices data are obtained from: https://www.kaggle.com/datasets/nisargchodavadiya/daily-gold-price-20152021-time-series?select=Gold+Price.csv which is a time series data frame pre-processed from https://in.investing.com/commodities/gold-mini by Nisarg Chodavadiya.

The Gold Price dataset has 2227 rows and 7 columns. These include Date, Price, Open, High, Low, Volume, and Change. Date starts from 1 January 2014 and ends with 5 August 2022. Price reflects the closing prices for that day, while Open is the opening prices. High and Low gives the highest and lowest prices reached in intra-day trading, and Volume shows the volume of trading for that day. Finally Change shows the percentage change from the previous day's closing price.

In order to determine a successful predictive algorithm, this work first divides the data into training and test set with 80-20% split. It then divides the training data again into training and validation sets with 80-20% split. All the training is done on this second training set (and sometimes smaller subset of this to ensure an average laptop can run some of the algorithms in a reasonable time) and tested on the test set. The most successful algorithm was then chosen to run on the validation set as a final determination of the predictive success. Success was defined as root mean square error (RMSE), which can effectively be interpreted as a typical error in predicting star rating. 

The report is split into 4 areas. Following this Introduction, the Analysis section begins with data exploration, examination, and preparation, and subsequently discusses the definition of sucess for the analysis, and analyses the sucess - or lack thereof - of kNN, user & movie effects, and regularisation approaches. The third section then discusses the modeling results on the validation set and the model performance. Finally the report concludes with a brief summary, its limitations, and suggestions for future work.









# 2. Analysis




## 2a. Data & Packages


Before loading up our data, let us load up packages we will need for this report. These are divided into 3 explanatory categories for convenience: helper packages, packages for plots and graphics, and packages for modelling.

```{r}
#first check if you have the following packages, if not then these will be instaled
if(!require(tidyverse)) install.packages("tidyverse")
if(!require(tibble)) install.packages("tibble")
if(!require(tsibble)) install.packages("tsibble")
if(!require(lubridate)) install.packages("lubridate")
if(!require(ggplot2)) install.packages("ggplot2")
if(!require(ggrepel)) install.packages("ggrepel")
if(!require(gridExtra)) install.packages("gridExtra")

#next load up these packages

#helper packages
library(tibble) #to be able to convert data frames to tibble objects
library(tsibble) #tibble objects for time series
library(tidyverse) #for tidy data
library(lubridate) #for dealing with dates

#packages for plots and graphics
library(ggplot2) #for visualisation
library(ggrepel) #for ensuring labels don't overlap in plots
library(gridExtra) #for plotting graphs in a grid or next to each other

```


```{r}
#Load up the data:

gold_df <- read.csv("~/R Projects/Gold-Prices-Forecasting/Gold Price.csv")

```

Let's understand the data:

```{r}
str(gold_df)
```

We can see that it is a 2227 by 7 data frame. It provides the measurements for closing, opening, and highest and lowest prices reached for each day, as well as the volume of trading for that day. Finally it provides the % change from the previous day's closing price. These are set against the daily index starting from 1st of January 2014. We can store this information as a __tsibble__ object for easier analysis.

```{r}
gold_df <- gold_df %>%
  mutate(Date = ymd(Date)) %>% #convert Date column from text to daily object with ymd() or with as_date().
  as_tsibble(index = Date) #convert to tsibble by identifying the index

#check the first few rows of the new tsibble object
head(gold_df)
```

We see that we now have a tsibble object with 7 columns. The [1D] means the index is in 1-day intervals.
